{"version":3,"file":"locker.js.es5.js","sources":["../src/locker.js"],"sourcesContent":["'use strict';\n\n/**\n * Extremely light library that makes HTML5 storage usage easier to the edge.\n * No dependencies, no configuration.\n */\nexport default class {\n\t/**\n\t * Creates a locker\n\t * @param {object} storage\n\t */\n\tconstructor(storage) {\n\t\tif (storage !== window.localStorage &&\n\t\t\tstorage !== window.sessionStorage) {\n\t\t\tthrow new TypeError('Invalid Storage object');\n\t\t} else {\n\t\t\tthis.storage = storage;\n\t\t}\n\t}\n\n\t/**\n\t * Add a value into HTML5 window.localStorage.\n\t * @param {*} key\n\t * @param {*} value\n\t */\n\tadd(key, value) {\n\t\tkey = this._parseToString(key);\n\t\tswitch (typeof value) {\n\t\t\tcase 'object': {\n\t\t\t\tconst parsedVal = this._parseToString(value);\n\t\t\t\tthis.storage.setItem(key, parsedVal);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tthis.storage.setItem(key, value);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Add a value with a given key to the storage if a key is not already used.\n\t * Otherwise returns ReferenceError instead of overwriting it;\n\t * @param {*} key\n\t * @param {*} value\n\t */\n\taddSafely(key, value) {\n\t\tkey = this._parseToString(key);\n\t\tconst keyExists = this.storage.getItem(key);\n\t\tif (keyExists) {\n\t\t\tthrow new ReferenceError('Provided key is already in use');\n\t\t}\n\t\tthis.add(key, value);\n\t}\n\n\t/**\n\t * Get a value from HTML5 window.localStorage\n\t * @param {*} key\n\t * @return {*}\n\t */\n\tget(key) {\n\t\tkey = this._parseToString(key);\n\t\treturn this.storage.getItem(key);\n\t}\n\n\t/**\n\t * Saves map as-is into localstorage\n\t * @param {Map} map\n\t */\n\tsaveMap(map) {\n\t\tconst isMap = Object.prototype.toString.call(map) === '[object Map]';\n\t\tif (!isMap) {\n\t\t\tthrow new TypeError('Must be of type Map');\n\t\t}\n\t\tfor (let [key, value] of map) {\n\t\t\tthis.add(key, value);\n\t\t}\n\t}\n\n\t/**\n\t * Saves and returns whole storage as map\n\t * @return {Map} localstorageCopy\n\t */\n\tgetMap() {\n\t\tconst mappedStorage = new Map();\n\t\tfor (let i = 0; i < this.storage.length; i++) {\n\t\t\tlet tempKey = this._parseToString(this.storage.key(i));\n\t\t\tlet tempVal = this._parseToString(this.storage.getItem(tempKey));\n\t\t\tmappedStorage.set(tempKey, tempVal);\n\t\t}\n\t\treturn mappedStorage;\n\t}\n\n\t/**\n\t * Check whether the given key exists in the window.localStorage\n\t * @param {*} key\n\t * @return {boolean}\n\t */\n\tkeyExists(key) {\n\t\treturn !!this.storage.getItem(this._parseToString(key));\n\t}\n\n\t/**\n\t * Check whether the given value exists in the window.localStorage\n\t * @param {*} value\n\t * @return {boolean}\n\t */\n\tvalueExists(value) {\n\t\tconst parsedVal = this._parseToString(value);\n\t\treturn !!parsedVal;\n\t}\n\n\t/**\n\t * Clear the whole window.localStorage\n\t */\n\tclear() {\n\t\tthis.storage.clear();\n\t}\n\n\t/**\n\t * Removes window.localstorage values by keys provide in array\n\t * @param {array} arr\n\t */\n\tclearSpecified(arr) {\n\t\tif (!Array.isArray(arr)) {\n\t\t\tthrow new TypeError('Array not provided');\n\t\t}\n\t\tfor (let i = 0; i < arr.length; ++i) {\n\t\t\tthis.storage.removeItem(this._parseToString(arr[i]));\n\t\t}\n\t}\n\n\t/**\n\t * Return size of localstorage\n\t * @return {number}\n\t */\n\tsize() {\n\t\treturn this.storage.length;\n\t}\n\n\t/**\n\t * Parse value to stringified JSON\n\t * @param {*} value\n\t * @return {string}\n\t * @private\n\t */\n\t_parseToString(value) {\n\t\tswitch (typeof value) {\n\t\t\tcase 'number':\n\t\t\tcase 'object': {\n\t\t\t\treturn JSON.stringify(value);\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\t}\n}\n"],"names":["storage","window","localStorage","sessionStorage","TypeError","key","value","this","_parseToString","parsedVal","setItem","getItem","ReferenceError","add","map","Object","prototype","toString","call","mappedStorage","Map","i","length","tempKey","tempVal","set","clear","arr","Array","isArray","removeItem","JSON","stringify"],"mappings":";yqCAWaA,gBACPA,IAAYC,OAAOC,cACtBF,IAAYC,OAAOE,qBACb,IAAIC,UAAU,+BAEfJ,QAAUA,wCASbK,EAAKC,YACFC,KAAKC,eAAeH,YACXC,gBAAAA,QACT,aACEG,EAAYF,KAAKC,eAAeF,QACjCN,QAAQU,QAAQL,EAAKI,sBAIrBT,QAAQU,QAAQL,EAAKC,sCAWnBD,EAAKC,QACRC,KAAKC,eAAeH,GACRE,KAAKP,QAAQW,QAAQN,SAEhC,IAAIO,eAAe,uCAErBC,IAAIR,EAAKC,+BAQXD,YACGE,KAAKC,eAAeH,GACnBE,KAAKP,QAAQW,QAAQN,mCAOrBS,QAC+C,iBAAxCC,OAAOC,UAAUC,SAASC,KAAKJ,UAEtC,IAAIV,UAAU,8DAEIU,iDAAK,oBAApBT,OAAKC,YACTO,IAAIR,EAAKC,uHAUV,IADCa,EAAgB,IAAIC,IACjBC,EAAI,EAAGA,EAAId,KAAKP,QAAQsB,OAAQD,IAAK,KACzCE,EAAUhB,KAAKC,eAAeD,KAAKP,QAAQK,IAAIgB,IAC/CG,EAAUjB,KAAKC,eAAeD,KAAKP,QAAQW,QAAQY,MACzCE,IAAIF,EAASC,UAErBL,oCAQEd,WACAE,KAAKP,QAAQW,QAAQJ,KAAKC,eAAeH,wCAQvCC,WACOC,KAAKC,eAAeF,wCAQjCN,QAAQ0B,+CAOCC,OACTC,MAAMC,QAAQF,SACZ,IAAIvB,UAAU,0BAEhB,IAAIiB,EAAI,EAAGA,EAAIM,EAAIL,SAAUD,OAC5BrB,QAAQ8B,WAAWvB,KAAKC,eAAemB,EAAIN,2CAS1Cd,KAAKP,QAAQsB,8CASNhB,mBACCA,gBAAAA,QACT,aACA,gBACGyB,KAAKC,UAAU1B,kBAGfA"}